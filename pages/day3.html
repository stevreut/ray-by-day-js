<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ray by Day JS - Dynamic SVG Content</title>
    <link rel="stylesheet" href="../assets/css/style.css">
    <link rel="icon" type="image/icon" href="../assets/images/icon/ray-trace-icon.ico">
</head>
<body>
    <h1 class="subduedh1">Ray by Day JS</h1>
    <h2><span class="dayh2">Day 3</span> - Dynamically Created SVG in DOM</h2>
    
    <div class="innerdiv">
        <h3>Day 3: Dynamic SVG Generation</h3>
        <p>
            Completing our progression from external files (Day 1) to inline content (Day 2), Day 3 demonstrates a more interesting,
            compact, and useful approach: programmatically generating SVG content entirely through JavaScript, specifically by 
            manipulating the SVG elements like any other element of the Document Object Model (DOM).
        </p>
        
        <p>
            Instead of pre-defining SVG elements in HTML or loading them from external files, we now create the entire image structure 
            dynamically. Each "pixel" (SVG rectangle) is generated by JavaScript code, allowing for entirely algorithmic image creation, 
            and real-time content generation based on user input or computational results.
        </p>
        
        <p>
            This approach provides the maximum flexibility for graphics programming. We can implement algorithms that generate images 
            based on mathematical functions, user interactions, or any other programmatic logic. The same techniques we develop here 
            will later be applied to more sophisticated rendering systems, including the ray tracing.
        </p>
        <p>
            The image below is generated entirely by JavaScript when the page loads, and, as before, the controls allow you to interact with 
            individual elements of the image.  View the source of this page to see for yourself that there is no longer
            any static SVG content.  Compare that to the Day 1 and Day 2 content wherein the SVG content took up an enormous 
            amount of space either in the page itself (Day 2) or in the external resource the page referred to (Day 1).
        </p>
        <p>
            When this page loads, the createSvgElementAt() JavaScript function is executed.  This function 
            creates an <code>&lt;SVG&gt;</code> DOM element and then appends a sequence of <code>&lt;rect&gt;</code>
            DOM elements, each of those being one of the square "pixels" of the dynamically generated image.
            Each of those pixels is given an <code>id=</code> attribute with a value in the form "r99c99" where the numbers after "r" and "c" 
            are the row and column of the pixel, thus each will have a unique ID (e.g. the pixel at row <span style="color:red;">5</span>
            and column <span style="color:#4a4;">11</span> will have
            <code>id="r<span style="color:red;">5</span>c<span style="color:#4a4;">11</span></code>).
        </p>
    </div>
    
    <div class="imgdiv">
        <h3>SVG dynamically created on this page by JavaScript</h3>
        <p id="svghere">SVG should be produced here on script load.</p>
        <p>
            Select an element ID from the dropdown list.  These IDs correspond to
            the id="..." attributes of the various dynamically generated SVG 
            "pixels" (<code>&lt;rect&gt;</code> (rectangle) elements).
        </p>
        <div class="innerdiv labeldiv">
            <label for="idselect">Element ID to Alter</label>
            <select id="idselect"></select>
        </div>
    </div>
    <div id="dynsvgcode"></div>
    <p style="margin-top: 45px; margin-bottom: 5px">Note this one important line below from the
        <code>createRectangleAt()</code> function above.  This line alone is responsible for 
        determining the color of the pixel based only on its coordinates (in this case,
        <code>c</code> and <code>r</code>).  In essence, this line alone determines the most 
        fundamental aspect of what image is generated.  It alone defines the relationship between 
        the Cartesian position on the image and the color at that position.  All of the rest of 
        the code deals with other aspects of the image such as its size, aspect ratio, and the 
        size of the virtual pixel.
    </p>
    <p>
        In later pages, as we dive further into the details of image creation, it will become increasingly 
        important and convenient to separate the other peripheral aspects of image creation from 
        this one core important function - a function that maps coordinates (x, y) to a color.  
        In this case, that it is a relatively simple function, but will definitely not be 
        the case going forward.
    </p>
    <div id="dynsvgcode2"></div>
    <p>The function <code>setDropDown()</code> below is executed when the page loads.  Initially,
        prior to this function being called, the dropdown has no options.  (You can see this
        in the HTML code.). This function finds each pixel element (<code>&lt;svg&gt;&lt;rect/&gt;</code>)
        in the page, gets its id= value, creates an <code>&lt;option&gt;</code> in the dropdown 
        for that id, and adds a listener for that value option which will set the "fill" attribute for that
        id to "red" when the option is selected.
    </p>
    <div id="dynsvgcode3"></div>
    <h3 class="resource-index-header">Resources used in this page</h3>
    <div id="resource-index"></div>
    <script type="module">
        import CodeFormatter from "../assets/js/utils/code-ext/code-formatter.js";
        const cf = new CodeFormatter();
        cf.insertResourceIndex("resource-index", [
            "./day3.html",
            "../assets/js/day3/script.js"
        ]);
    </script>
    <div class="footnote" id="defs">
        <h3>Definition</h3>
        <dl>
            <dt>Document Object Model (DOM)</dt>
            <dd><p>An API that represents and interacts
                with any HTML or XML-based markup language document. The DOM is a document model
                loaded in the browser and representing the document as a node tree, or DOM tree,
                where each node represents part of the document (e.g., an element, text string,
                or comment).  <i>(credit: Mozilla Developer Network).</i></p>
                <p><ul>
                    <li><a href="https://www.w3schools.com/js/js_htmldom.asp">W3 Schools</a></li>
                    <li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Document_Object_Model">Mozilla</a></li>
                </ul></p>
            </dd>
        </dl>
    </div>

    <div class="hopdiv">
        <a href="./day2.html">Prev</a>
        <a href="../index.html">Home</a>
        <a href="./day4.html">Next</a>
    </div>
    <script src="../assets/js/day3/script.js" type="module"></script>
</body>
</html>